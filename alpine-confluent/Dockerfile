FROM insidin/alpine-hadoop

USER root

ENV SCALA_VERSION "2.10.4"
ENV CONFLUENT_VERSION "1.0"
ENV CONFLUENT_HOME /opt/confluent
ENV CONFLUENT_USER confluent
ENV PATH ${PATH}:${CONFLUENT_HOME}/bin:$
ENV USER $HADOOP_USER

ADD confluent-${CONFLUENT_VERSION}-${SCALA_VERSION}.tar.gz /opt

RUN	adduser -S $CONFLUENT_USER -G $GROUP -u 1001 && \
	chown -R $CONFLUENT_USER:$GROUP /opt/confluent-${CONFLUENT_VERSION} && \ 
	ln -s /opt/confluent-${CONFLUENT_VERSION} ${CONFLUENT_HOME}

ENTRYPOINT ["./execute.sh"]
